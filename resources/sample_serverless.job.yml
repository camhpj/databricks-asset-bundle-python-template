resources:
  jobs:
    sample_serverless_job:
      name: sample_serverless_job
      # run_as:
      #   service_principal_name: {service_principal_name}
      # trigger:
      #   periodic:
      #     interval: 1
      #     unit: DAYS
      parameters:
        - name: catalog
          default: ${var.catalog}
        - name: schema
          default: ${var.schema}
      environments:
        - environment_key: sample_serverless_env
          spec:
            environment_version: "4"
            dependencies:
              - dist/*.whl
      tasks:
        - task_key: sample_serverless_task
          environment_key: sample_serverless_env
          python_wheel_task:
            package_name: python_template
            entry_point: main
            named_parameters:
              catalog: "{{job.parameters.catalog}}"
              schema: "{{job.parameters.schema}}"
      # tags are useful for cost allocation and tracking
      tags:
        job: sample_serverless_job
        bundle: ${bundle.name}
